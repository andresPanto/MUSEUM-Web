<%- include ('../shared/general-html/head.ejs')%>
<%- include ('header.ejs') %>
<%- include ('./error_message.ejs')%>
<h1 class="text-center"><b>Purchases</b></h1>
<!--Purchases list-->
<div class="container">
    <table class="table table-striped table-bordered">
        <tr>
            <th>Purchase ID</th>
            <th>Username</th>
            <th>Activity</th>
            <th>Quantity</th>
            <th>Total(USD)</th>
            <th>Status</th>
        </tr>
        <!--Iterar con un for-->
        <%purchases.forEach((purchase)=> { %>
        <%const isActive = purchase.status%>

        <tr>
            <td>
                <%= purchase.idPurchase%>
            </td>
            <td>
                <%= purchase.user.username%>
            </td>
            <td>
                <%= purchase.schedule.activity.name%>
            </td>
            <td>
                <%= purchase.quantity%>
            </td>
            <td>
                <%= purchase.total%>
            </td>
            <td>
                <form action="/purchases/admin/status/<%=purchase.idPurchase%>" method="get">
                    <button type="submit"
                    <%if(isActive){%>
                            class="btn btn-danger"
                    <%}else{%>
                            class="btn btn-success"
                            <%}%>
                    >
                        <span class="glyphicon glyphicon-minus-sign"></span>
                        <%if(isActive){%>
                            Disable
                        <%}else{%>
                            Enable
                        <%}%>
                    </button>
            </td>
        </tr>
        <!--Fin for-->
        <% })%>
    </table>
    <hr>
</div>